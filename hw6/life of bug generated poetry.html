<!DOCTYPE html>
<html>
<head>
</head>
<body>
<script>


var buglife = "No, no, no. Oh, no. Oh, no. Im lost! Wheres the line? It just went away. What do I do? Help! Well be stuck here forever! Do not panic. Do not panic! We are trained professionals. Now, stay calm. We are going around the leaf. A Around the leaf? I dont think we can do that. Oh, nonsense. This is nothing compared to the twig of 93. Whimpering  Thats it. Thats it. Good! Youre doing great! There you go. There you go! Watch my eyes. Dont look away.And heres the line again. Thank you. Thank you, Mr. Soil. Laughing Good job, everybody! Oh, my. Theres quite a gap, Mr. Soil. Shouldnt we tell the queen? I dont think we need to involve the queen in this. Shes got enough on her plate already, training her daughter. Oh, yes. Princess Atta, the poor dear. Oh, winds died down. Theyll be here soon. Just be confident, dear. Youll be fine.Theres a gap. Theres a gap in the line. What are we gonna do? Its okay, Your Highness. Gaps happen. We just lost a few inches, thats all. Oh. Right. Your Highness, I cant count when you hover like that. Oh, of course. Im sorry. Go ahead. Guys, go shade someone else for a while. Pet Chirps  Okay, Atta. Now what do we do? Ahh Oh! Dont tell me. I know it. What is it? We relax. Chuckles Right. Oh, itll be fine. Its the same, year after year. They come, they eat, they leave. Thats our lot in life. Its not a lot, but its our life. Laughs  Chuckles  Isnt that right, Aphie? Oh, youre such a cute little aphid. Rumbling  Ditch Dot Yeah, yeah! Hey, come back here! Strains, Grunts  Dot! Yes, Mother. What did I tell you about trying to fly? Not until my wings grow in. Right. But Mom Dot, youre a young queen ant and your wings are too little I was talking to Mother. Youre not the queen yet, Atta. Now, Dot, be nice to your sister. Its not my fault shes so stressed out. Sighs I know, I know. Im always acting";

var dictionary = {};
var ngrams = [];
var len = 2;


for(var i = 0; i < buglife.length-len; i+=len){	
	var ngram = buglife.substring(i, i+len);
	var ngramNext = buglife.substring(i+len, i+len*2);
	if(dictionary[ngram] === undefined){ 
		dictionary[ngram] = [];
	}
	
	dictionary[ngram].push(ngramNext);

	ngrams.push(ngram);
}

var firstGram = ngrams[ Math.floor(Math.random()*ngrams.length) ];
var phrase = [firstGram];

var generateLength = 40;

for(var i = 0; i < generateLength; i++){
	var prevWord = phrase[i];
	var nextArray = dictionary[prevWord];
	var nextWord = nextArray[ Math.floor(Math.random()*nextArray.length) ];
	phrase.push(nextWord);
}

var string = "";
for(var i = 0; i < phrase.length; i++){
	string += phrase[i];
}

console.log(string);

</script>
</body>
</html>